<div class="bg">
  <form (ngSubmit)="onSubmit(form)" #form="ngForm">
    <div class="header">Rent/Sell Property</div>
    <input type="hidden" name="user_id" [value]="user_id || ''" />

    <div class="form-group">
      <label for="name">Name:</label>
      <input
        type="text"
        class="form-control"
        id="name"
        name="name"
        required
        [(ngModel)]="name"
        #nameField="ngModel"
      />
      <div
        *ngIf="nameField.invalid && (nameField.dirty || nameField.touched)"
        class="text-danger"
      >
        Name is required.
      </div>
    </div>

    <div class="form-group">
      <label for="address">Address:</label>
      <input
        type="text"
        class="form-control"
        id="address"
        name="address"
        required
        [(ngModel)]="address"
        #addressField="ngModel"
      />
      <div
        *ngIf="
          addressField.invalid && (addressField.dirty || addressField.touched)
        "
        class="text-danger"
      >
        Address is required.
      </div>
    </div>

    <div class="form-group">
      <label for="description">Description:</label>
      <textarea
        class="form-control"
        id="description"
        name="description"
        rows="3"
        required
        [(ngModel)]="description"
        #descriptionField="ngModel"
      ></textarea>
      <div
        *ngIf="
          descriptionField.invalid &&
          (descriptionField.dirty || descriptionField.touched)
        "
        class="text-danger"
      >
        Description is required.
      </div>
    </div>

    <div class="form-group">
      <label for="type">Type:</label><br />
      <label
        ><input
          type="radio"
          name="type"
          value="commercial"
          [(ngModel)]="type"
        />
        Commercial</label
      ><br />
      <label
        ><input
          type="radio"
          name="type"
          value="residential"
          [(ngModel)]="type"
        />
        Residential</label
      ><br />
      <label
        ><input
          type="radio"
          name="type"
          value="industrial"
          [(ngModel)]="type"
        />
        Industrial</label
      ><br />
      <label
        ><input type="radio" name="type" value="land" [(ngModel)]="type" />
        Land</label
      ><br />
      <div *ngIf="!type" class="text-danger">Type is required.</div>
    </div>

    <div class="form-group">
      <label for="price">Price:</label>
      <input
        type="number"
        class="form-control"
        id="price"
        name="price"
        required
        [(ngModel)]="price"
        #priceField="ngModel"
      />
      <div
        *ngIf="priceField.invalid && (priceField.dirty || priceField.touched)"
        class="text-danger"
      >
        Price is required.
      </div>
    </div>

    <div class="form-group">
      <label for="sqft">Sqft:</label>
      <input
        type="number"
        class="form-control"
        id="sqft"
        name="sqft"
        required
        [(ngModel)]="sqft"
        #sqftField="ngModel"
      />
      <div
        *ngIf="sqftField.invalid && (sqftField.dirty || sqftField.touched)"
        class="text-danger"
      >
        Sqft is required.
      </div>
    </div>

    <div class="form-group">
      <label for="photo">Photo:</label>
      <input
        type="file"
        class="form-control-file"
        id="photo"
        name="photo"
        accept="image/*"
        (change)="onFileSelected($event)"
      />
      <!-- Validation for photo can be added as needed -->
    </div>

    <div class="form-group">
      <label> Rent/Sell:</label><br />
      <label
        ><input
          type="radio"
          name="rentSell"
          value="rent"
          [(ngModel)]="Rent_sell"
        />
        Rent</label
      ><br />
      <label
        ><input
          type="radio"
          name="rentSell"
          value="sell"
          [(ngModel)]="Rent_sell"
        />
        Sell</label
      ><br />
      <div *ngIf="!Rent_sell" class="text-danger">
        Rent/Sell option is required.
      </div>
    </div>

    <div class="form-group">
      <label for="longitude">Map-Details</label>
      <input
        type="text"
        class="form-control"
        id="longitude"
        name="longitude"
        placeholder="www.googlemap.com"
        required
        [(ngModel)]="longitude"
        #longitudeField="ngModel"
      />
      <div
        *ngIf="
          longitudeField.invalid &&
          (longitudeField.dirty || longitudeField.touched)
        "
        class="text-danger"
      >
        Map details are required.
      </div>
    </div>

    <div class="form-group">
      <label for="category">Category:</label>
      <select
        class="form-control"
        id="category"
        [(ngModel)]="category"
        name="category"
        required
        #categoryField="ngModel"
      >
        <option value="" disabled selected>Select a category</option>
        <!-- Populate options dynamically from backend -->
        <option *ngFor="let cat of categories" [value]="cat._id">
          {{ cat.name }}
        </option>
      </select>
      <div
        *ngIf="
          categoryField.invalid &&
          (categoryField.dirty || categoryField.touched)
        "
        class="text-danger"
      >
        Category is required.
      </div>
    </div>

    <div class="form-group">
      <label for="subcategory">SubCategory:</label>
      <select
        class="form-control"
        id="subcategory"
        [(ngModel)]="subcategory"
        name="subcategory"
        required
        #subcategoryField="ngModel"
      >
        <option value="" disabled selected>Select a subcategory</option>
        <option
          *ngFor="let subcategory of subcategories"
          [value]="subcategory._id"
        >
          {{ subcategory.s_name }}
        </option>
      </select>
      <div
        *ngIf="
          subcategoryField.invalid &&
          (subcategoryField.dirty || subcategoryField.touched)
        "
        class="text-danger"
      >
        Subcategory is required.
      </div>
    </div>

    <button type="submit" class="btn btn-primary">Submit</button>
  </form>

  <!-- Bootstrap JS (optional) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</div>
